## Producer/Consumers [producer-consumers]


Реализуйте простую потокобезопасную (thread-safe) очередь для передачи данных между потоками. Очередь должна быть шаблонной и передавать данные произвольного типа. Потокобезопасность означает, что очередь можно использовать в многопоточном окружении, и никакой из потоков не будет видеть промежуточного состояния очереди, т.е. каждая операция будет атомарной: она либо еще не выполнилась, либо полностью завершена, и ее результат виден другим потокам.


Запустите несколько потоков, один из них будет поставщиком (producer), а остальные - потребителями (consumer). Поставщик генерирует задания (или данные) и отправляет их потребителям с помощью потокобезопасной очереди. Потребители занимаются тем, что извлекают задания (данные) из очереди и выполняют их (или обрабатывают данные).


Задачи будут такие: определить, является ли число простым или нет (хотя вы можете придумать что-нибудь еще). Поставщик будет с помощью генератора превдослучайных чисел генерировать числа для проверки и класть их в очередь, а потребитель - определять, являются ли они простыми, и печатать сами числа и результат проверки простоты на экран.


Для работы с мьютексами напишите собственный вариант RAII-обертки lock_guard, также реализуйте и используйте класс thread_guard для автоматического join-а потоков.
